.. _Deal-statement-manual:

交易证明使用手册
^^^^^^^^^^^^^^^^^^^

1. 引言
===========

1.1 编写目的
--------------

提供交易证明的使用方式

1.2 术语
--------------

======= ======== ====================================================
英文    中文     含义
======= ======== ====================================================
TxProof 交易证明 对应交易的证明路径，可用于验证交易在对应区块的存在性
======= ======== ====================================================

2. 操作说明
===============

2.1 生成交易证明
--------------------

================ =============== ========
RPC方法          参数            返回值
================ =============== ========
proof_getTxProof hash: 交易哈希  交易证明
================ =============== ========

TxProof结构体
>>>>>>>>>>>>>>>>>>>

 ::

    // 例子
    {
        'jsonrpc': '2.0',
        'namespace': 'global',
        'id': 0,
        'code': 0,
        'message': 'SUCCESS',
        'result':
        {'txProof':
            [{'hash': 'Ft8+d4nyFIIwOAIBAAIBQgQwv5HqqwZ/nhgWbiuK3NUIOcrvQPuzF2AUCL3H9ANCU+0vPXbXpSSc/IwW85QWEjpJ'},
            {'hash': 'Ft8+d5GGQr8wSAIBAAIBQwRAWqbv344FaUdqb2rc95Oy3/Uo2SS5C/tnMbMnyfE9+yqBD76VBKnLTASqv0xKjbshCiWNa0q412WEOLK1wsas6w==',
            'index': 1}]
        }


TxProof结构体是一个MerkleProofNode的列表，MerkleProofNode有两个元素：

1. hash：表示该节点的hash值

2. index：表示该节点处于多叉树的位置

2.2 验证证明
--------------

+------------+-----------------------------------------------+---------+
| RPC方法    | 参数                                          | 返回值  |
+============+===============================================+=========+
| p          | {proof：交易证明;hash:                        | 是否验  |
| roof_valid | 交易哈希;txRoot：交易所在区块的txroot;}       | 证成功  |
| ateTxProof |                                               |         |
+------------+-----------------------------------------------+---------+

3.补充
============

从hyperchain2.7.0的数据开始支持交易证明，之前版本不支持交易证明